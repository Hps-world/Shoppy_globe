import{r as i,u,j as s,L as d,a as h,b as m,s as j,c as x}from"./index-C4BRfh8y.js";function f(){const[e,c]=i.useState([]),[a,l]=i.useState(!1),[n,o]=i.useState(null),t=i.useRef(!0);return i.useEffect(()=>(t.current=!0,l(!0),o(null),fetch("https://dummyjson.com/products").then(r=>{if(!r.ok)throw new Error(`Failed to fetch: ${r.status}`);return r.json()}).then(r=>{t.current&&c(r.products||[])}).catch(r=>{t.current&&o(r.message||"Unknown error")}).finally(()=>{t.current&&l(!1)}),()=>{t.current=!1}),[]),{data:e,loading:a,error:n}}function p({product:e}){const c=u(),a=()=>{c(h({id:e.id,title:e.title,price:e.price,thumbnail:e.thumbnail}))};return s.jsxs("div",{className:"product-card",children:[s.jsx(d,{to:`/product/${e.id}`,className:"thumb-link",title:e.title,children:s.jsx("img",{src:e.thumbnail,alt:e.title,loading:"lazy"})}),s.jsxs("div",{className:"product-body",children:[s.jsx(d,{to:`/product/${e.id}`,className:"title",children:e.title}),s.jsxs("div",{className:"meta",children:[s.jsxs("span",{children:["⭐ ",e.rating]}),s.jsxs("span",{children:["₹ ",e.price]})]}),s.jsxs("p",{className:"desc",children:[e.description?.slice(0,100),e.description?.length>100&&"..."]})]}),s.jsxs("div",{className:"product-actions",children:[s.jsx("button",{className:"btn",onClick:a,children:"Add to Cart"}),s.jsx(d,{to:`/product/${e.id}`,className:"btn ghost",children:"View"})]})]})}function g(){const{data:e,loading:c,error:a}=f(),l=u(),n=m(t=>t.search.term||""),o=i.useMemo(()=>{if(!n.trim())return e;const t=n.toLowerCase();return e.filter(r=>r.title.toLowerCase().includes(t)||(r.description||"").toLowerCase().includes(t)||(r.brand||"").toLowerCase().includes(t))},[e,n]);return s.jsxs("div",{children:[s.jsxs("section",{className:"search-row",children:[s.jsx("input",{"aria-label":"Search products",value:n,onChange:t=>l(j(t.target.value)),placeholder:"Search products by title, brand or description..."}),s.jsx("button",{className:"btn ghost",onClick:()=>l(x()),children:"Clear"})]}),c&&s.jsx("div",{className:"center",children:"Loading products..."}),a&&s.jsxs("div",{className:"error",children:["Error: ",a]}),s.jsx("section",{className:"grid",children:o.map(t=>s.jsx(p,{product:t},t.id))})]})}export{g as default};
